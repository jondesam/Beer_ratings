{"ast":null,"code":"import _classCallCheck from \"/Users/jonhyun/Desktop/Dev/BeerMontreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jonhyun/Desktop/Dev/BeerMontreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jonhyun/Desktop/Dev/BeerMontreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jonhyun/Desktop/Dev/BeerMontreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jonhyun/Desktop/Dev/BeerMontreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/jonhyun/Desktop/Dev/BeerMontreal/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/jonhyun/Desktop/Dev/BeerMontreal/client/src/components/Beers.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query BeersQuery($first: Int, $skip: Int, $orderBy: LinkOrderByInput) {\\n    beers(first: $first, skip: $skip, orderBy: $orderBy) {\\n      abv\\n      available\\n      brewery\\n      ibu\\n      link\\n      name\\n      price\\n      ratings {\\n        name\\n        value\\n      }\\n      style\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component, Fragment } from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport BeerItem from './BeerItem';\nvar BEERS_QUERY = gql(_templateObject());\nvar LINKS_PER_PAGE = 5;\nexport var Beers = /*#__PURE__*/function (_Component) {\n  _inherits(Beers, _Component);\n\n  function Beers() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Beers);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Beers)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this._forPafination = function (store) {\n      var isNewPage = _this.props.location.pathname.includes('new');\n\n      var page = parseInt(_this.props.match.params.page, 10);\n      var skip = isNewPage ? (page - 1) * LINKS_PER_PAGE : 0;\n      var first = isNewPage ? LINKS_PER_PAGE : 100;\n      var orderBy = isNewPage ? 'createdAt_DESC' : null;\n      var data = store.readQuery({\n        query: BEERS_QUERY,\n        variables: {\n          first: first,\n          skip: skip,\n          orderBy: orderBy\n        }\n      });\n      store.writeQuery({\n        query: BEERS_QUERY,\n        data: data\n      });\n    };\n\n    _this._getQueryVariables = function () {\n      var page = parseInt(_this.props.match.params.page, 10);\n      var skip = (page - 1) * LINKS_PER_PAGE;\n      var first = LINKS_PER_PAGE;\n      var orderBy = 'createdAt_DESC';\n      return {\n        first: first,\n        skip: skip,\n        orderBy: orderBy\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(Beers, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"display-4 my-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }\n      }, \"Beers du Quebec \"), /*#__PURE__*/React.createElement(Query, {\n        query: BEERS_QUERY,\n        variables: this._getQueryVariables,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      }, function (_ref) {\n        var loading = _ref.loading,\n            error = _ref.error,\n            data = _ref.data;\n        if (loading) return /*#__PURE__*/React.createElement(\"h4\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 33\n          }\n        }, \"Loading...\");\n        if (error) console.log(error);\n        return /*#__PURE__*/React.createElement(Fragment, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }\n        }, data.beers.map(function (beer) {\n          return /*#__PURE__*/React.createElement(BeerItem, {\n            key: beer.name,\n            beer: beer,\n            forPafination: _this2._forPafination,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 19\n            }\n          });\n        }));\n      }));\n    }\n  }]);\n\n  return Beers;\n}(Component);\nexport default Beers;","map":{"version":3,"sources":["/Users/jonhyun/Desktop/Dev/BeerMontreal/client/src/components/Beers.js"],"names":["React","Component","Fragment","gql","Query","BeerItem","BEERS_QUERY","LINKS_PER_PAGE","Beers","_forPafination","store","isNewPage","props","location","pathname","includes","page","parseInt","match","params","skip","first","orderBy","data","readQuery","query","variables","writeQuery","_getQueryVariables","loading","error","console","log","beers","map","beer","name"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport BeerItem from './BeerItem'\n\nconst BEERS_QUERY = gql`\n  query BeersQuery($first: Int, $skip: Int, $orderBy: LinkOrderByInput) {\n    beers(first: $first, skip: $skip, orderBy: $orderBy) {\n      abv\n      available\n      brewery\n      ibu\n      link\n      name\n      price\n      ratings {\n        name\n        value\n      }\n      style\n    }\n  }\n`\nconst LINKS_PER_PAGE = 5\n\nexport class Beers extends Component {\n  _forPafination = (store) => {\n    const isNewPage = this.props.location.pathname.includes('new')\n    const page = parseInt(this.props.match.params.page, 10)\n\n    const skip = isNewPage ? (page - 1) * LINKS_PER_PAGE : 0\n    const first = isNewPage ? LINKS_PER_PAGE : 100\n    const orderBy = isNewPage ? 'createdAt_DESC' : null\n\n    const data = store.readQuery({\n      query: BEERS_QUERY,\n      variables: { first, skip, orderBy },\n    })\n\n    store.writeQuery({ query: BEERS_QUERY, data })\n  }\n\n  _getQueryVariables = () => {\n    const page = parseInt(this.props.match.params.page, 10)\n\n    const skip = (page - 1) * LINKS_PER_PAGE\n    const first = LINKS_PER_PAGE\n    const orderBy = 'createdAt_DESC'\n    return { first, skip, orderBy }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <h1 className='display-4 my-3'>Beers du Quebec </h1>\n\n        <Query query={BEERS_QUERY} variables={this._getQueryVariables}>\n          {({ loading, error, data }) => {\n            if (loading) return <h4>Loading...</h4>\n            if (error) console.log(error)\n\n            return (\n              <Fragment>\n                {data.beers.map((beer) => (\n                  <BeerItem\n                    key={beer.name}\n                    beer={beer}\n                    forPafination={this._forPafination}\n                  />\n                ))}\n              </Fragment>\n            )\n          }}\n        </Query>\n      </Fragment>\n    )\n  }\n}\n\nexport default Beers\n"]},"metadata":{},"sourceType":"module"}